<div class="container-fluid py-4">
  <div class="text-center mb-4">
    <h1 class="mb-2">Add New Boxers</h1>
    <div class="red-underline"></div>
  </div>

  <div class="row justify-content-center">
    <div class="col-md-6">
      <!-- Filters and Search -->
      <div class="card mb-4">
        <div class="card-body p-0">
          <div class="row g-0">
            <!-- Division Filter -->
            <div class="col-md-4 border-end">
              <div class="p-3">
                <select class="form-select filter-select" disabled>
                  <option class="filter-option">Division</option>
                </select>
              </div>
            </div>

            <!-- Nationality Filter -->
            <div class="col-md-4 border-end">
              <div class="p-3">
                <select class="form-select filter-select" disabled>
                  <option class="filter-option">Nationality</option>
                </select>
              </div>
            </div>

            <!-- Search Box -->
            <div class="col-md-4">
              <div class="p-3">
                <%= form_tag assign_boxers_path, method: :get do %>
                  <div class="input-group">
                    <%= text_field_tag :search, params[:search], 
                        class: 'form-control',
                        placeholder: 'Enter boxer name...' %>
                    <button class="btn btn-outline-secondary" type="submit">
                      <i class="fas fa-search"></i>
                    </button>
                  </div>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Boxers Table -->
      <div class="card">
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table mb-0">
              <thead class="table-light">
                <tr>
                  <th>Name</th>
                  <th>Division</th>
                  <th>Nationality</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <% if @boxers.any? %>
                  <% @boxers.each do |boxer| %>
                    <tr>
                      <td><%= link_to boxer.full_name, '#', class: 'boxer_link text-decoration-none text-dark' %></td>
                      <td>N/A</td>
                      <td>N/A</td>
                      <td class="text-end">
                        <% if boxer.boxer_requests.exists?(coach_id: current_coach.id, status: :pending) %>
                          <button class="btn btn-secondary" disabled>
                            Pending
                          </button>
                        <% else %>
                          <%= button_to send_add_request_coach_path(boxer_id: boxer.id), 
                              method: :post,
                              class: 'btn request-btn' do %>
                            Send add request
                          <% end %>
                        <% end %>
                      </td>
                    </tr>
                  <% end %>
                <% else %>
                  <tr>
                    <td colspan="4" class="text-center py-4 text-muted">
                      No unassigned boxers found
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<% content_for :head do %>
  <style>
    /* Target the button inside the form with class 'request' */
    form.request button {
      background-color: #ba0404;
      color: white;
      border: none;
      border-radius: 5px;
      text-align: center;
      padding: 6px 12px;
    }

    /*form.request button:hover {
      background-color: #8b0000;
    }*/

    .boxer_link:hover {
      color: #ba0404 !important;
      text-decoration: underline !important;
    }

    .red-underline {
      height: 2px;
      background-color: #ba0404;
      width: 95%;
      margin: 0 auto;
    }

    .table th {
      font-weight: 500;
      border-bottom-width: 1px;
    }

    .table td {
      vertical-align: middle;
    }

    .card-body .form-select,
    .card-body .input-group {
      height: 38px;
    }

    .card-body .p-3 {
      padding-top: 0.8rem !important;
      padding-bottom: 0.8rem !important;
    }

    .filter-select {
      background-color: #ba0404 !important;
      color: white !important;
      border: none;
    }

    .filter-select:disabled {
      opacity: 1;
      cursor: pointer;
    }

    .filter-option {
      color: white !important;
    }

    /* Change the color of the dropdown arrow */
    .filter-select {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e") !important;
    }

    /* Custom button styles */
    .btn.request-btn {
      background-color: #ba0404;
      border-color: #ba0404;
      color: white;
      padding: 6px 12px;
      font-size: 14px;
    }

    .btn.request-btn:hover {
      opacity: 0.8;
      background-color: #ba0404;
      border-color: #ba0404;
      color: white;
    }

    .btn.request-btn:active {
      opacity: 0.5;
      background-color: #ba0404;
      border-color: #ba0404;
      color: white;
    }
  </style>
<% end %>
